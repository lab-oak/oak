sudo docker rmi ubuntu:22.04
cd oak
sudo docker pull ubuntu:22.04
sudo docker run -it -v "$PWD:/work" ubuntu:22.04
apt update
apt install -y g++-12
apt install -y cmake build-essential git libgmp3-dev

export CC=gcc-12
export CXX=g++-12

git clone --recurse-submodules --shallow-submodules https://github.com/lab-oak/oak
cd oak && git submodule update --recursive
cp -r work/libpkmn ./
cp -r /work/extern/engine/zig-out ./extern/engine/
mkdir release && cd release && cmake .. -DCMAKE_BUILD_TYPE=Release

cmake -DCMAKE_TOOLCHAIN_FILE=../dev/mingw-toolchain.cmake -DGMP_LIBRARY=/usr/local/mingw/lib/libgmp.a -DGMP_INCLUDE_DIR=/usr/local/mingw/include -DCMAKE_BUILD_TYPE=Release ..

export CC=x86_64-w64-mingw32-gcc
export CXX=x86_64-w64-mingw32-g++
sudo apt install m4
sudo apt install texedit
./configure \
    --host=x86_64-w64-mingw32 \
    --prefix=/usr/local/mingw \
    --disable-shared \
    --enable-static \
make
make install